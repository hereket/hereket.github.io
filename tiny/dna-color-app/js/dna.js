var globalBoxSize=40,globalItemsPerRow=12,globalDrawText=!0,globalRowTopOffset=0,globalRowsPerPage=10,globalAlternate=!1,globalLongLineFirst=!1,globalShowLetterA=!0,globalShowLetterC=!0,globalShowLetterG=!0,globalShowLetterT=!0;function offset(e){var t=e.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+n,left:t.left+o}}function drawChars(e,t){var o=e.getContext("2d"),n=e.width,l=e.height,a=globalItemsPerRow,d=a-1,c=2*Math.ceil(t.length/(d+a));if(globalItemsPerRow*globalBoxSize<n)var r=globalBoxSize;else r=n/a;var i=(n-d*r)/2,s=(n-a*r)/2;o.fillStyle="rgba(240,240,240,1)",o.fillRect(0,0,n,l),globalRowTopOffset<0?globalRowTopOffset=0:globalRowTopOffset>c-4&&(globalRowTopOffset=c-4);for(var g=Math.floor(l/r)+1,u=globalRowTopOffset,f=u+g,h=u;h<f;h++)if(!(h>c-1)){var m=r*(h-u);colCount=a,pad=s,globalAlternate&&(globalLongLineFirst?h%2!=0?(colCount=d,pad=i):(colCount=a,pad=s):h%2==0?(colCount=d,pad=i):(colCount=a,pad=s));var w=h*a;if(globalAlternate){if(globalLongLineFirst)var b=Math.floor(h/2);else b=Math.ceil(h/2);w=h*a-b}for(var p=0;p<colCount;p++){var v=pad+r*p,L=t[w+p];if(L){var E=!1;if("a"==(L=L.toLowerCase())?(color="#fdfaa9",E=globalShowLetterA):"c"==L?(color="#8bea8f",E=globalShowLetterC):"g"==L?(color="#74bfec",E=globalShowLetterG):"t"==L?(color="#ffbcc5",E=globalShowLetterT):"f"==L?(color="#7fff00",E=!0):"k"==L?(color="#FF7F50",E=!0):"m"==L?(color="#fff700",E=!0):"p"==L?(color="#ff4500",E=!0):"r"==L?(color="#40e0d0",E=!0):"n"==L?(color="#e0b0ff",E=!0):(color="black",E=!0),E?(o.fillStyle=color,o.fillRect(v,m,r,r)):(o.fillStyle="white",o.fillRect(v,m,r,r)),globalDrawText&&L&&E){o.fillStyle="rgba(0,0,0, 0.3)";var I=r;o.font=I+"px Arial",o.fillText(L.toUpperCase(),v,m+r)}}}o.fillStyle="rgba(0,0,0, 0.9)";var B=h+1;o.font="10px Arial",o.fillText(B.toString(),0,m+r)}}function changeSize(e,t){return function(){var t=document.getElementById("sizeValueInput");(globalItemsPerRow+=e)<=0&&(globalItemsPerRow=1),t.value=globalItemsPerRow,update()}}function update(){var e=document.getElementById("dnacanvas"),t=document.getElementById("dnainput");e.offsetWidth,e.offsetHeight;drawChars(e,t.value.split(""))}document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("dnacanvas"),t=document.getElementById("dnainput");console.log(e.offsetTop),e.width=200;var o=e.offsetWidth,n=e.offsetHeight;e.width=o,e.height=n;var l=t.value.split("");drawChars(e,l),t.addEventListener("input",(function(){var o=t.value.split("");drawChars(e,o)})),window.addEventListener("resize",(function(t){e.width=e.offsetWidth,e.height=e.offsetHeight,drawChars(e,l)}),!0);var a=document.getElementById("sizeIncreaseButton"),d=document.getElementById("sizeDecreaseButton"),c=document.getElementById("sizeValueInput");a.addEventListener("click",changeSize(1,o)),d.addEventListener("click",changeSize(-1,o)),c.value=globalItemsPerRow,c.addEventListener("input",(function(){var e=parseInt(this.value);e&&(globalItemsPerRow=e,update())}));var r=document.getElementById("showLetters"),i=document.getElementById("showBoxA"),s=document.getElementById("showBoxC"),g=document.getElementById("showBoxT"),u=document.getElementById("showBoxG");r.addEventListener("change",(function(){globalDrawText=!!this.checked,update()})),i.addEventListener("change",(function(){globalShowLetterA=!!this.checked,update()})),s.addEventListener("change",(function(){globalShowLetterC=!!this.checked,update()})),g.addEventListener("change",(function(){globalShowLetterT=!!this.checked,update()})),u.addEventListener("change",(function(){globalShowLetterG=!!this.checked,update()}));var f=document.getElementById("alternateRows"),h=document.getElementById("longLineFirst");function m(e){return function(){globalRowTopOffset+=e,update()}}function w(e){return function(){"up"==e?globalRowTopOffset+=globalRowsPerPage:"down"==e&&(globalRowTopOffset-=globalRowsPerPage),update()}}f.addEventListener("change",(function(e){this.checked?(globalAlternate=!0,h.parentNode.classList.remove("hidden")):(globalAlternate=!1,h.parentNode.classList.add("hidden")),update()})),h.addEventListener("change",(function(e){globalLongLineFirst=!!this.checked,update()}));var b=document.getElementById("button-up"),p=document.getElementById("button-down"),v=document.getElementById("button-pageup"),L=document.getElementById("button-pagedown"),E=document.getElementById("button-top"),I=document.getElementById("sequence-input"),B=document.getElementById("sequence-show");document.getElementById("sequence-close").addEventListener("click",(function(){I.classList.add("sequence-removed"),B.classList.remove("show-button-removed")})),B.addEventListener("click",(function(){I.classList.remove("sequence-removed"),B.classList.add("show-button-removed")})),b.addEventListener("click",m(1)),p.addEventListener("click",m(-1)),v.addEventListener("click",w("up")),L.addEventListener("click",w("down")),E.addEventListener("click",(function(){globalRowTopOffset=0,update()}))}));
